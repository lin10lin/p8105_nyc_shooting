---
title: "p8105_nyc_shooting"
output: html_document
date: "2024-11-19"
---
```{r, message=FALSE}
library(sf)
library(dplyr)
library(readr)
```
# This part focus on data cleaning, tidying and merging.
## adding neighborhood information to the shooting dataset
```{r, message=FALSE}
df=read_csv("NYPD_Shooting_Incident_Data__Historic__20241119.csv")
neighborhoods = st_read("./nynta2020_24d/nynta2020.shp")
df_sf <- st_as_sf(df, coords = c("X_COORD_CD", "Y_COORD_CD"), crs = 2263)
# Transform the CRS of neighborhoods
neighborhoods <- st_transform(neighborhoods, crs = st_crs(df_sf))
df_joined <- st_join(df_sf, neighborhoods, left = TRUE)
# Add neighborhood information to original data frame
df$neighborhood <- df_joined$NTAName
write.csv(df, "shooting_neighborhood.csv", row.names = FALSE)